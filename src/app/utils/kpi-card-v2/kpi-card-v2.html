
<div class="w-full bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-all duration-300">
  @if(data()) {
    <!-- Header con título y cambio porcentual -->
    <div class="px-6 pt-5 pb-2">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <!-- Ícono más pequeño y elegante -->
          <div class="w-8 h-8 rounded-lg flex items-center justify-center" 
               [style.background-color]="data()?.bgColor + '20'">
            <svg class="w-5 h-5" 
                 [style.color]="data()?.bgColor"
                 fill="currentColor" 
                 viewBox="0 0 24 24">
              <path [attr.d]="data()?.iconPath"></path>
            </svg>
          </div>
          
          <!-- Título principal -->
          <div>
            <h3 class="text-base font-medium text-gray-600 mb-0">
              {{ data()?.title }}
            </h3>
            @if (hasSubtitle()) {
              <p class="text-xs text-gray-400 mt-0">
                {{ data()?.subtitle }}
              </p>
            }
          </div>
        </div>
        
        <!-- Indicador de cambio porcentual -->
        <div class="flex items-center gap-1 px-2 py-1 rounded-full bg-green-50">
          <svg class="w-3 h-3 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 17l10-10M17 7l-10 10"></path>
          </svg>
          <span class="text-xs font-medium text-green-600">+20%</span>
        </div>
      </div>
    </div>
    
    <!-- Número principal grande -->
    <div class="px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-l-4 border-l-blue-500">
      <div class="text-4xl font-black text-gray-900 leading-none tracking-tight drop-shadow-sm">
        {{ data()?.number | number:'1.0-2' }}
      </div>     
    </div>
    
    <!-- Sección dividida: Mini gráfico + Totales por sector/ámbito -->
    <div class="px-6 pb-5">
      <div class="grid grid-cols-2 gap-4 h-32">
        <!-- Mini gráfico de área (50%) -->
        <div class="flex items-center">
          <app-bar-component [dataOptions]="data()?.chartDataOptionsHeader"/>
        </div>
        
        <!-- Totales por sector y ámbito (50%) -->
        <div class="space-y-3">
          <!-- Sector -->
          <div>
            <h4 class="text-xs font-medium text-gray-500 mb-2 uppercase tracking-wide">Sector</h4>
            <div class="grid grid-cols-2 gap-2">
              <div class="text-center">
                <div class="text-sm font-semibold text-blue-600">
                  {{ data()?.totales?.estatal ? (data()?.totales?.estatal | number:'1.0-0') : '-' }}
                </div>
                <div class="text-xs text-gray-500">Estatal</div>
              </div>
              <div class="text-center">
                <div class="text-sm font-semibold text-orange-600">
                  {{ data()?.totales?.privado ? (data()?.totales?.privado | number:'1.0-0') : '-' }}
                </div>
                <div class="text-xs text-gray-500">Privado</div>
              </div>
            </div>
          </div>
          
          <!-- Ámbito -->
          <div>
            <h4 class="text-xs font-medium text-gray-500 mb-2 uppercase tracking-wide">Ámbito</h4>
            <div class="grid grid-cols-2 gap-2">
              <div class="text-center">
                <div class="text-sm font-semibold text-green-600">
                  {{ data()?.totales?.urbano ? (data()?.totales?.urbano | number:'1.0-0') : '-' }}
                </div>
                <div class="text-xs text-gray-500">Urbano</div>
              </div>
              <div class="text-center">
                <div class="text-sm font-semibold text-yellow-600">
                  {{ data()?.totales?.rural ? (data()?.totales?.rural | number:'1.0-0') : '-' }}
                </div>
                <div class="text-xs text-gray-500">Rural</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  }
</div>

